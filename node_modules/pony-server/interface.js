module.exports = function(server){
    
    var self = this;
    
    this.middleware = [];
    
    /*
        Adds additional middleware to be executed
        before actual request handler
        
        @param callable action
    */
    this.q = new (function(){
        this.add = function(action){
            self.push(action);
        };
    })();
    
    /*
        Starts the server with specified stats
        
        @param object cfg
        @param callable requestHandler
    */
    this.start = function($, requestHandler){
      
        server.start($, requestHandler, this.middleware);
    };
    
};